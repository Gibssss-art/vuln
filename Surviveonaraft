-- Gibssss Hub | Unknown
-- Clean FPS script with Luna UI

local Luna = loadstring(game:HttpGet("https://raw.githubusercontent.com/Nebulla-Softworks/Luna-Interface-Suite/main/source.lua"))()

local Window = Luna:CreateWindow({
    Name = "Gibssss Hub | ",
    LoadingTitle = "Gibssss Hub",
    LoadingSubtitle = "by Gibssss",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "GibssssHub",
        FileName = "SurviveonaraftConfig"
    },
    Discord = {
        Enabled = false,
        Invite = "",
        RememberJoins = false
    },
    KeySystem = false
})

-- Local variable to track toggle state
local autoCollectEnabled = false
local collectingThread = nil

local function startCollecting()
    -- Prevent creating duplicate threads
    if collectingThread then return end

    collectingThread = task.spawn(function()
        while autoCollectEnabled do
            task.wait(0.5)

            local success, err = pcall(function()
                local player = game.Players.LocalPlayer
                local char = player.Character
                if not char or not char:FindFirstChild("HumanoidRootPart") then return end

                for _, obj in ipairs(workspace.World.Items:GetDescendants()) do
                    if obj:GetAttribute("Water") == true 
                       and (string.find(obj.Name, "Box") or string.find(obj.Name, "Chest")) then

                        -- Teleport above the item
                        char.HumanoidRootPart.CFrame = obj.CFrame * CFrame.new(0, 5, 0)
                        
                        -- Collect item
                        local Action = game:GetService("ReplicatedStorage"):FindFirstChild("Action")
                        if Action then
                            Action:InvokeServer("Collect", obj)
                        end

                        break
                    end
                end
            end)

            if not success then warn("[Collect Error]:", err) end
        end

        -- cleanup when stopped
        collectingThread = nil
    end)
end

-- Create Home Tab (Required for Luna)
Window:CreateHomeTab({
    SupportedExecutors = {
        "Synapse X", "Krnl", "Fluxus", "Script-Ware", 
        "Electron", "Solara", "Wave", "Delta", "Xeno"
    },
    DiscordInvite = nil,
    Icon = 1
})

-- Create Tabs
local MainTab = Window:CreateTab({
    Name = "Main",
    Icon = "gps_fixed",
    ImageSource = "Material",
    ShowTitle = true
})

MainTab:CreateSection("Auto Farm")

MainTab:CreateButton({
    Name = "Goto Spawn",
    Description = "click to tp",
    Callback = function()
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(workspace.SpawnLocation.Position)
        game.Players.LocalPlayer.Character.Humanoid.Jump = true
    end
})

MainTab:CreateToggle({
    Name = "Auto Collect Boxes",
    CurrentValue = false,
    Callback = function(state)
        autoCollectEnabled = state

        if state then
            startCollecting()
        end
    end
})

MainTab:CreateSection("Auto Farm")

MainTab:CreateButton({
    Name = "Upgrade Crafting Table LVL6",
    Description = "click to get",
    Callback = function()
        local MarketplaceService = game:GetService("MarketplaceService")
        local id = game.Players.LocalPlayer.UserId
        
        MarketplaceService:SignalPromptProductPurchaseFinished(id, 3422310969, true)
        MarketplaceService:SignalPromptProductPurchaseFinished(id, 3422310972, true)
        MarketplaceService:SignalPromptProductPurchaseFinished(id, 3422310970, true)
        MarketplaceService:SignalPromptProductPurchaseFinished(id, 3422310971, true)
        MarketplaceService:SignalPromptProductPurchaseFinished(id, 3422310967, true)
    end
})

MainTab:CreateButton({
    Name = "Starter Pistol",
    Description = "click to get",
    Callback = function()
        game:GetService("MarketplaceService"):SignalPromptProductPurchaseFinished(game.Players.LocalPlayer.UserId, 3428925716, true)
        game:GetService("MarketplaceService"):SignalPromptProductPurchaseFinished(game.Players.LocalPlayer.UserId, 3435174070, true)
    end
})

MainTab:CreateButton({
    Name = "Inf Revive",
    Description = "click to get",
    Callback = function()
        game:GetService("MarketplaceService"):SignalPromptProductPurchaseFinished(game.Players.LocalPlayer.UserId, 3421071079, true)
    end
})

MainTab:CreateButton({
    Name = "Inf Jump",
    Description = "click to get",
    Callback = function()
        game:GetService("UserInputService").JumpRequest:Connect(function()
            game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
        end)
    end
})

MainTab:CreateKeybind({
    Name = "Toggle UI",
    CurrentKeybind = "RightShift",
    HoldToInteract = false,
    Flag = "UIKeybind",
    Callback = function(Keybind)
    end,
})

MainTab:CreateButton({
    Name = "Destroy GUI",
    Callback = function()
        Luna:Destroy()
    end,
})

-- Notifications
Luna:Notification({
    Title = "Gibssss Loaded",
    Content = "Script loaded successfully!",
    Icon = "check_circle",
    ImageSource = "Material"
})
